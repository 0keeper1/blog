<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><title>Meson Build System Quick Start</title><style>a:link{color:#fff}a:visited{color:#a0a0a0}a:hover,a:active{color:#fff}pre{padding:.5rem;overflow:scroll}pre table{border-collapse:collapse;width:fit-content}pre table td{padding-right:5px}pre table td:first-of-type{text-align:left;user-select:none}pre mark{background-color:#a0a0a0;display:block}</style><link href=./favicon.ico rel=icon type=image/x-icon><link href=./favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=./favicon-32x32.png rel=icon sizes=32x32 type=image/png><body style=color:#fff;background:#111><header><nav><a href=/blog/>Home</a> | <a href=/blog/aboutme/>About Me</a></nav></header><hr><h1>Meson Build System Quick Start</h1><article><p>In this article, I’ll walk you through a quick way to dive into the Meson Build System, starting from scratch to create an executable project, add a library, and more.<p>Let’s get started!<h3 id=what-will-we-cover>What Will We Cover?</h3><ol><li>Creating a basic project structure<li>Setting up and configuring your project files<li>Adding and organizing source and header files</ol><h4 id=step-1-create-a-new-project>Step 1: Create a New Project</h4><p>To start, we’ll create a new project that compiles into an executable and is installable on your system.<p>Use this <a href=https://mesonbuild.com/SimpleStart.html#installing-meson>LINK</a> to install Meson if you haven’t already.<pre class=language-sh data-lang=sh data-linenos style=color:#eff;background-color:#212121><code class=language-sh data-lang=sh><table><tbody><tr><td>1<td><span style=color:#82aaff>mkdir myexec
</span><tr><td>2<td><span style=color:#82aaff>meson init</span><span style=color:#89ddff> --</span><span style=color:#f78c6c>type</span><span style=color:#82aaff> executable</span><span style=color:#89ddff> -</span><span style=color:#f78c6c>l</span><span style=color:#82aaff> c</span><span style=color:#89ddff> -</span><span style=color:#f78c6c>n</span><span style=color:#82aaff> myexec</span><span style=color:#89ddff> --</span><span style=color:#f78c6c>builddir</span><span style=color:#82aaff> build</span><span style=color:#89ddff> -</span><span style=color:#f78c6c>C</span><span style=color:#82aaff> ./myexec
</span></table></code></pre><p>Here’s what each part of the command does:<ul><li><code>init</code>: Initializes a new project.<li><code>--type</code>: Defines the project type; <code>executable</code> for executables and <code>library</code> for libraries.<li><code>-l</code>: Specifies the project language (e.g., <code>c</code>, <code>c++</code>, <code>rust</code>, etc.).<li><code>-n</code>: Sets the project name.<li><code>--builddir</code>: Names the build directory.<li><code>-C</code>: Changes to the specified folder and initializes the project there.</ul><h4 id=step-2-configure-the-project>Step 2: Configure the Project</h4><p>Navigate into the <code>myexec</code> folder to set up the file structure.<pre class=language-sh data-lang=sh data-linenos style=color:#eff;background-color:#212121><code class=language-sh data-lang=sh><table><tbody><tr><td>1<td><span style=color:#82aaff>cd myexec
</span><tr><td>2<td><span style=color:#82aaff>mkdir src include build
</span><tr><td>3<td><span style=color:#82aaff>mv myexec.c src/main.c
</span></table></code></pre><p>Next, create some additional source and header files.<pre class=language-sh data-lang=sh data-linenos style=color:#eff;background-color:#212121><code class=language-sh data-lang=sh><table><tbody><tr><td>1<td><span style=color:#82aaff>touch src/funcs.c
</span><tr><td>2<td><span style=color:#82aaff>touch include/funcs.h
</span></table></code></pre><p>Here’s the content for <code>funcs.h</code>:<pre class=language-c data-lang=c data-linenos style=color:#eff;background-color:#212121><code class=language-c data-lang=c><table><tbody><tr><td>1<td><span style=color:#c792ea;font-style:italic>#pragma</span><span> once
</span><tr><td>2<td><span>
</span><tr><td>3<td><span style=color:#c792ea;font-style:italic>int </span><span style=color:#82aaff>call_me_daddy</span><span style=color:#89ddff>();
</span></table></code></pre><p>And for <code>funcs.c</code>:<pre class=language-c data-lang=c data-linenos style=color:#eff;background-color:#212121><code class=language-c data-lang=c><table><tbody><tr><td>1<td><span style=color:#c792ea;font-style:italic>#include </span><span style=color:#89ddff>"</span><span style=color:#c3e88d>funcs.h</span><span style=color:#89ddff>"
</span><tr><td>2<td><span style=color:#c792ea;font-style:italic>#include </span><span style=color:#89ddff><</span><span style=color:#c3e88d>stdio.h</span><span style=color:#89ddff>>
</span><tr><td>3<td><span>
</span><tr><td>4<td><span style=color:#c792ea;font-style:italic>int </span><span style=color:#82aaff>call_me_daddy</span><span style=color:#89ddff>() {
</span><tr><td>5<td><span>    </span><span style=color:#82aaff>printf</span><span style=color:#89ddff>("</span><span style=color:#c3e88d>Hi Daddy!!!</span><span style=color:#89ddff>");
</span><tr><td>6<td><span>    </span><span style=color:#c792ea;font-style:italic>return </span><span style=color:#f78c6c>0</span><span style=color:#89ddff>;    
</span><tr><td>7<td><span style=color:#89ddff>}
</span></table></code></pre><h4 id=step-3-update-the-meson-build-file>Step 3: Update the <code>meson.build</code> File</h4><p>Open the <code>meson.build</code> file and update it to look like this:<pre class=language-c data-lang=c data-linenos style=color:#eff;background-color:#212121><code class=language-c data-lang=c><table><tbody><tr><td>1<td><span style=color:#82aaff>project</span><span style=color:#89ddff>(
</span><tr><td>2<td><span style=color:#82aaff>    </span><span style=color:#89ddff>'</span><span style=color:#c3e88d>myexec</span><span style=color:#89ddff>',
</span><tr><td>3<td><span style=color:#82aaff>    </span><span style=color:#89ddff>'</span><span style=color:#c3e88d>c</span><span style=color:#89ddff>',
</span><tr><td>4<td><span style=color:#82aaff>    version </span><span style=color:#89ddff>: '</span><span style=color:#c3e88d>0.0.0</span><span style=color:#89ddff>',
</span><tr><td>5<td><span style=color:#82aaff>    default_options </span><span style=color:#89ddff>: [
</span><tr><td>6<td><span style=color:#82aaff>        </span><span style=color:#89ddff>'</span><span style=color:#c3e88d>c_std=c2x</span><span style=color:#89ddff>',
</span><tr><td>7<td><span style=color:#82aaff>        </span><span style=color:#89ddff>'</span><span style=color:#c3e88d>warning_level=3</span><span style=color:#89ddff>',
</span><tr><td>8<td><span style=color:#82aaff>    </span><span style=color:#89ddff>],
</span><tr><td>9<td><span style=color:#82aaff>    meson_version </span><span style=color:#89ddff>: '</span><span style=color:#c3e88d>>=1.5.0</span><span style=color:#89ddff>'
</span><tr><td>10<td><span style=color:#89ddff>)
</span><tr><td>11<td><span>
</span><tr><td>12<td><span>build_args </span><span style=color:#89ddff>= [
</span><tr><td>13<td><span>    </span><span style=color:#89ddff>'</span><span style=color:#c3e88d>-DNAME=</span><span style=color:#89ddff>' +</span><span> meson</span><span style=color:#89ddff>.</span><span style=color:#82aaff>project_name</span><span style=color:#89ddff>(),
</span><tr><td>14<td><span>    </span><span style=color:#89ddff>'</span><span style=color:#c3e88d>-DVERSION=</span><span style=color:#89ddff>' +</span><span> meson</span><span style=color:#89ddff>.</span><span style=color:#82aaff>project_version</span><span style=color:#89ddff>(),
</span><tr><td>15<td><span style=color:#89ddff>]
</span><tr><td>16<td><span>
</span><tr><td>17<td><span>header </span><span style=color:#89ddff>= </span><span style=color:#82aaff>include_directories</span><span style=color:#89ddff>('</span><span style=color:#c3e88d>include</span><span style=color:#89ddff>')
</span><tr><td>18<td><span>
</span><tr><td>19<td><span>myexec </span><span style=color:#89ddff>= </span><span style=color:#82aaff>executable</span><span style=color:#89ddff>(
</span><tr><td>20<td><span style=color:#82aaff>    meson</span><span style=color:#89ddff>.</span><span style=color:#82aaff>project_name</span><span style=color:#89ddff>(),
</span><tr><td>21<td><span style=color:#82aaff>    sources </span><span style=color:#89ddff>: </span><span style=color:#82aaff>run_command</span><span style=color:#89ddff>('</span><span style=color:#c3e88d>find</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>src</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>-depth</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>-type</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>f</span><span style=color:#89ddff>',</span><span style=color:#82aaff> check </span><span style=color:#89ddff>: </span><span style=color:#f78c6c>true</span><span style=color:#89ddff>).</span><span style=color:#82aaff>stdout</span><span style=color:#89ddff>().</span><span style=color:#82aaff>strip</span><span style=color:#89ddff>().</span><span style=color:#82aaff>split</span><span style=color:#89ddff>('\n'),
</span><tr><td>22<td><span style=color:#82aaff>    install </span><span style=color:#89ddff>: </span><span style=color:#f78c6c>true</span><span style=color:#89ddff>,
</span><tr><td>23<td><span style=color:#82aaff>    native </span><span style=color:#89ddff>: </span><span style=color:#f78c6c>true</span><span style=color:#89ddff>,
</span><tr><td>24<td><span style=color:#82aaff>    c_args </span><span style=color:#89ddff>:</span><span style=color:#82aaff> build_args</span><span style=color:#89ddff>,
</span><tr><td>25<td><span style=color:#82aaff>    include_directories </span><span style=color:#89ddff>:</span><span style=color:#82aaff> header
</span><tr><td>26<td><span style=color:#89ddff>)
</span></table></code></pre><p>Check these references:<ul><li><a href=https://mesonbuild.com/Reference-manual_functions.html#executable>executable()</a><li><a href=https://mesonbuild.com/Reference-manual_functions.html#project>project()</a><li><a href=https://mesonbuild.com/Reference-manual_functions.html#include_directories>include_directories()</a><li><a href=https://mesonbuild.com/Reference-manual_functions.html#run_command>run_command()</a></ul><h4 id=step-4-add-a-test-directory>Step 4: Add a Test Directory</h4><p>Before proceeding, let’s create a test directory:<pre class=language-sh data-lang=sh data-linenos style=color:#eff;background-color:#212121><code class=language-sh data-lang=sh><table><tbody><tr><td>1<td><span style=color:#82aaff>mkdir test
</span><tr><td>2<td><span style=color:#82aaff>touch test/test.c
</span></table></code></pre><h4 id=step-5-set-up-library-and-test-executable>Step 5: Set Up Library and Test Executable</h4><p>Finally, add a library and test executable to your <code>meson.build</code> file:<pre class=language-c data-lang=c data-linenos style=color:#eff;background-color:#212121><code class=language-c data-lang=c><table><tbody><tr><td>1<td><span>myexec_lib </span><span style=color:#89ddff>= </span><span style=color:#82aaff>static_library</span><span style=color:#89ddff>(
</span><tr><td>2<td><span style=color:#82aaff>    meson</span><span style=color:#89ddff>.</span><span style=color:#82aaff>project_name</span><span style=color:#89ddff>() + '</span><span style=color:#c3e88d>_lib</span><span style=color:#89ddff>',
</span><tr><td>3<td><span style=color:#82aaff>    sources </span><span style=color:#89ddff>: </span><span style=color:#82aaff>run_command</span><span style=color:#89ddff>('</span><span style=color:#c3e88d>find</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>src</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>-depth</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>-type</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>f</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>-not</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>-name</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>main.c</span><span style=color:#89ddff>',</span><span style=color:#82aaff> check </span><span style=color:#89ddff>: </span><span style=color:#f78c6c>true</span><span style=color:#89ddff>).</span><span style=color:#82aaff>stdout</span><span style=color:#89ddff>().</span><span style=color:#82aaff>strip</span><span style=color:#89ddff>().</span><span style=color:#82aaff>split</span><span style=color:#89ddff>('\n'),
</span><tr><td>4<td><span style=color:#82aaff>    c_args </span><span style=color:#89ddff>:</span><span style=color:#82aaff> build_args</span><span style=color:#89ddff>,
</span><tr><td>5<td><span style=color:#82aaff>    include_directories </span><span style=color:#89ddff>:</span><span style=color:#82aaff> header
</span><tr><td>6<td><span style=color:#89ddff>)
</span><tr><td>7<td><span>
</span><tr><td>8<td><span>myexec_test </span><span style=color:#89ddff>= </span><span style=color:#82aaff>executable</span><span style=color:#89ddff>(
</span><tr><td>9<td><span style=color:#82aaff>    meson</span><span style=color:#89ddff>.</span><span style=color:#82aaff>project_name</span><span style=color:#89ddff>() + '</span><span style=color:#c3e88d>_test</span><span style=color:#89ddff>',
</span><tr><td>10<td><span style=color:#82aaff>    sources </span><span style=color:#89ddff>: </span><span style=color:#82aaff>run_command</span><span style=color:#89ddff>('</span><span style=color:#c3e88d>find</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>test</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>-depth</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>-type</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>f</span><span style=color:#89ddff>',</span><span style=color:#82aaff> check </span><span style=color:#89ddff>: </span><span style=color:#f78c6c>true</span><span style=color:#89ddff>).</span><span style=color:#82aaff>stdout</span><span style=color:#89ddff>().</span><span style=color:#82aaff>strip</span><span style=color:#89ddff>().</span><span style=color:#82aaff>split</span><span style=color:#89ddff>('\n'),
</span><tr><td>11<td><span style=color:#82aaff>    c_args </span><span style=color:#89ddff>:</span><span style=color:#82aaff> build_args</span><span style=color:#89ddff>,
</span><tr><td>12<td><span style=color:#82aaff>    dependencies </span><span style=color:#89ddff>: [</span><span style=color:#82aaff>dep</span><span style=color:#89ddff>]
</span><tr><td>13<td><span style=color:#89ddff>)
</span><tr><td>14<td><span>
</span><tr><td>15<td><span style=color:#82aaff>test</span><span style=color:#89ddff>('</span><span style=color:#c3e88d>test</span><span style=color:#89ddff>',</span><span style=color:#82aaff> myexec_test</span><span style=color:#89ddff>)
</span></table></code></pre><p>You can use <code>shared_library</code> instead.<ul><li><a href=https://mesonbuild.com/Reference-manual_functions.html#static_library>static_library()</a><li><a href=https://mesonbuild.com/Reference-manual_functions.html#shared_library>shared_library()</a><li><a href=https://mesonbuild.com/Reference-manual_functions.html#test>test()</a></ul><p>If you have a lot of test files that execute separately, use this instead of <code>myexec_test</code> and <code>test</code>:<pre class=language-c data-lang=c data-linenos style=color:#eff;background-color:#212121><code class=language-c data-lang=c><table><tbody><tr><td>1<td><span>foreach test_file </span><span style=color:#89ddff>: </span><span style=color:#82aaff>run_command</span><span style=color:#89ddff>('</span><span style=color:#c3e88d>find</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>test</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>-depth</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>-type</span><span style=color:#89ddff>', '</span><span style=color:#c3e88d>f</span><span style=color:#89ddff>',</span><span style=color:#82aaff> check </span><span style=color:#89ddff>: </span><span style=color:#f78c6c>true</span><span style=color:#89ddff>).</span><span style=color:#82aaff>stdout</span><span style=color:#89ddff>().</span><span style=color:#82aaff>strip</span><span style=color:#89ddff>().</span><span style=color:#82aaff>split</span><span style=color:#89ddff>('\n')
</span><tr><td>2<td><span>    test_name </span><span style=color:#89ddff>=</span><span> test_file</span><span style=color:#89ddff>.</span><span style=color:#82aaff>split</span><span style=color:#89ddff>('</span><span style=color:#c3e88d>/</span><span style=color:#89ddff>')[-</span><span style=color:#f78c6c>1</span><span style=color:#89ddff>].</span><span style=color:#82aaff>substring</span><span style=color:#89ddff>(</span><span style=color:#f78c6c>0</span><span style=color:#89ddff>, -</span><span style=color:#f78c6c>2</span><span style=color:#89ddff>)
</span><tr><td>3<td><span>    test_exe </span><span style=color:#89ddff>= </span><span style=color:#82aaff>executable</span><span style=color:#89ddff>(
</span><tr><td>4<td><span style=color:#82aaff>        test_name</span><span style=color:#89ddff>,
</span><tr><td>5<td><span style=color:#82aaff>        test_file</span><span style=color:#89ddff>,
</span><tr><td>6<td><span style=color:#82aaff>        link_with </span><span style=color:#89ddff>:</span><span style=color:#82aaff> myexec_lib</span><span style=color:#89ddff>,
</span><tr><td>7<td><span style=color:#82aaff>        build_by_default </span><span style=color:#89ddff>: </span><span style=color:#f78c6c>false</span><span style=color:#89ddff>,
</span><tr><td>8<td><span style=color:#82aaff>        d_unittest </span><span style=color:#89ddff>: </span><span style=color:#f78c6c>true</span><span style=color:#89ddff>,
</span><tr><td>9<td><span style=color:#82aaff>        include_directories </span><span style=color:#89ddff>:</span><span style=color:#82aaff> src_headers
</span><tr><td>10<td><span style=color:#82aaff>    </span><span style=color:#89ddff>)
</span><tr><td>11<td><span>    </span><span style=color:#82aaff>test</span><span style=color:#89ddff>(</span><span style=color:#82aaff>test_name</span><span style=color:#89ddff>,</span><span style=color:#82aaff> test_exe</span><span style=color:#89ddff>)
</span><tr><td>12<td><span style=color:#82aaff>endforeach
</span></table></code></pre><p>Then add test files:<pre class=language-sh data-lang=sh data-linenos style=color:#eff;background-color:#212121><code class=language-sh data-lang=sh><table><tbody><tr><td>1<td><span style=color:#82aaff>touch test/test_call_me_daddy.c
</span></table></code></pre><p>And the content is this:<pre class=language-c data-lang=c data-linenos style=color:#eff;background-color:#212121><code class=language-c data-lang=c><table><tbody><tr><td>1<td><span style=color:#c792ea;font-style:italic>#include </span><span style=color:#89ddff>"</span><span style=color:#c3e88d>funcs.h</span><span style=color:#89ddff>"
</span><tr><td>2<td><span>
</span><tr><td>3<td><span style=color:#c792ea;font-style:italic>int </span><span style=color:#82aaff>main</span><span style=color:#89ddff>() {
</span><tr><td>4<td><span>    </span><span style=color:#c792ea;font-style:italic>int</span><span> res </span><span style=color:#89ddff>= </span><span style=color:#82aaff>call_me_daddy</span><span style=color:#89ddff>();
</span><tr><td>5<td><span>    </span><span style=color:#82aaff>assert</span><span style=color:#89ddff>(</span><span style=color:#82aaff>res </span><span style=color:#89ddff>== </span><span style=color:#f78c6c>0</span><span style=color:#89ddff>);
</span><tr><td>6<td><span style=color:#89ddff>}
</span></table></code></pre><h4 id=step-6-setup-compile-test-run>Step 6: Setup, Compile, Test, Run</h4><ul><li>Setup:</ul><pre class=language-sh data-lang=sh data-linenos style=color:#eff;background-color:#212121><code class=language-sh data-lang=sh><table><tbody><tr><td>1<td><span style=color:#82aaff>meson setup build
</span></table></code></pre><ul><li>Compile:</ul><pre class=language-sh data-lang=sh data-linenos style=color:#eff;background-color:#212121><code class=language-sh data-lang=sh><table><tbody><tr><td>1<td><span style=color:#82aaff>meson compile</span><span style=color:#89ddff> -</span><span style=color:#f78c6c>v</span><span style=color:#89ddff> -</span><span style=color:#f78c6c>C</span><span style=color:#82aaff> build
</span></table></code></pre><ul><li>Test:</ul><pre class=language-sh data-lang=sh data-linenos style=color:#eff;background-color:#212121><code class=language-sh data-lang=sh><table><tbody><tr><td>1<td><span style=color:#82aaff>meson test</span><span style=color:#89ddff> -</span><span style=color:#f78c6c>v</span><span style=color:#89ddff> -</span><span style=color:#f78c6c>C</span><span style=color:#82aaff> build
</span></table></code></pre><ul><li>Run:</ul><pre class=language-sh data-lang=sh data-linenos style=color:#eff;background-color:#212121><code class=language-sh data-lang=sh><table><tbody><tr><td>1<td><span style=color:#82aaff>./build/myexec
</span></table></code></pre><p>And that’s it! I hope you enjoy it. If you have any questions, feel free to reach out:<ul><li><a href=https://t.me/my_acrp_exp>Telegram</a><li><a href=https://x.com/0_keeper_1>X (formerly Twitter)</a></ul></article><hr><footer><p>Made with ❤️ by 0xKeeper. © 2024. All rights reserved.</footer>